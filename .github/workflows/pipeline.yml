name: learn-github-actions
run-name: ${{ github.actor }} is learning GitHub Actions
on: [push]
jobs:
  check-bats-version:
    runs-on: ubuntu-latest
    steps:
      
      - name: 'Install Salesforce CLI'
        run: |
            wget https://developer.salesforce.com/media/salesforce-cli/sf/channels/stable/sf-linux-x64.tar.xz
            mkdir ~/sf
            tar xJf sf-linux-x64.tar.xz -C ~/sf --strip-components 1
            echo "$HOME/sf/bin" >> $GITHUB_PATH
            ~/sf/bin/sf version
        
      - name: 'URL Secret'      
        shell: bash
        run: |
              echo ${{vars.SFLOGIN}} > ./login.txt
     
      - name: 'Authenticate to org'
        #run: sfdx auth:sfdxurl:store -f ./login.txt -s -a integration
        run: sfdx auth:sfdxurl:store -f ./login.txt

      # deploy to org
      #- name: 'Validation against Develop org'
        # run: sfdx force:source:deploy -p force-app --testlevel RunLocalTests -c --json  
       # run: sfdx force:source:deploy -p force-app --testlevel NoTestRun -c --json

